# CSS Generation

## How generation works

Jekyll requires the following CSS files:
- `assets/index.css`: Plain CSS which is not processed.
- `assets/tailwind.css`: A generated file containing Tailwind CSS specific to your site.
- *Note: `assets/tailwind.config.css` is ignored by Jekyll*

CSS is generated as follows:
- Generated you run `npm run css:dev` (also called via `npm run dev`)
- Generated you run `npm run css:rel` (also called via `npm run rel`)
- Tailwind CSS is generated from `assets/tailwind.config.css`.
- PostCSS processes the CSS via the config `postcss.config.js`.
- Generated CSS is saved to `assets/tailwind.css`.

PostCSS processes generated CSS as follows:
- `autoprefixer`: Adds prefixes such a `-webkit-` where necessary.
- (`css:rel` only) `cssnano`: Strips out comments and minifies the CSS.
- (`css:rel` only) `purgecss`: Removes CSS if the CSS class or element (e.g. `.my-class`, `h1`) is not referenced in your code.
    - PurgeCSS searches all `html` and `md` files in your project.
    - PurgeCSS does *not* look in folders `node_modules/` or `_site/`.
    - PurgeCSS looks for whole class names or elements (e.g. `.my-class`, `h1`) so don't build up classes like `"my" + "-class"`.

Double check your deployed site when starting with markdown:
- Markdown can generate elements which will not be found in your code;
- E.g. `# My Title` outputs `<h1>My Title</h1>` to the `_site/` folder.
- PurgeCSS ignores `_site/` and will therefore strip `h1` related CSS in rel.
- Configure the PurgeCSS whitelist in `postcss.config.js` to fix this.
- Most common markdown elements like `h1` are already whitelisted, just be aware this can happen.

## Troubleshoot

### My styling disappears when deployed
- If the element (e.g. `<code>`) is generated by markdown then whitelist the element (`code`) in `assets/tailwind.config.css` under the PurgeCSS config.
- Don't build up class names like `"my" + "-class"`. Use full names like `"my-class"` instead.
- Don't whitelist the `_site/` folder as this folder is not guaranteed to exist when deployed to a server.

### Have another issue?
Contact me by posting an issue. I'll be happy to help ðŸ™‚